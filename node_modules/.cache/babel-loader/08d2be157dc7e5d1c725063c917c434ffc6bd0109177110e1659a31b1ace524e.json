{"ast":null,"code":"import _regeneratorRuntime from\"/Users/grantgautier/Desktop/GitHub/ReLaunch_dApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/grantgautier/Desktop/GitHub/ReLaunch_dApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/grantgautier/Desktop/GitHub/ReLaunch_dApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import web3 from'../utilities/web3';import{getContract}from'../utilities/contract';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LotteryActions(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),pot=_useState2[0],setPot=_useState2[1];var contract=getContract();useEffect(function(){function fetchPot(){return _fetchPot.apply(this,arguments);}function _fetchPot(){_fetchPot=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var potValue;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return contract.methods.totalPot().call();case 2:potValue=_context.sent;setPot(web3.utils.fromWei(potValue,'ether'));case 4:case\"end\":return _context.stop();}},_callee);}));return _fetchPot.apply(this,arguments);}fetchPot();},[contract]);var buyTicket=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var accounts,ticketPrice,newPotValue;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return web3.eth.getAccounts();case 2:accounts=_context2.sent;_context2.next=5;return contract.methods.ticketPriceInMOMO().call();case 5:ticketPrice=_context2.sent;_context2.next=8;return contract.methods.buyTicket().send({from:accounts[0],value:ticketPrice});case 8:_context2.next=10;return contract.methods.totalPot().call();case 10:newPotValue=_context2.sent;setPot(web3.utils.fromWei(newPotValue,'ether'));case 12:case\"end\":return _context2.stop();}},_callee2);}));return function buyTicket(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lottery Actions\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Current Pot: \",pot,\" ETH\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:buyTicket,children:\"Buy Ticket\"})]})]});}export default LotteryActions;","map":{"version":3,"names":["React","useState","useEffect","web3","getContract","jsx","_jsx","jsxs","_jsxs","LotteryActions","_useState","_useState2","_slicedToArray","pot","setPot","contract","fetchPot","_fetchPot","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","potValue","wrap","_callee$","_context","prev","next","methods","totalPot","call","sent","utils","fromWei","stop","buyTicket","_ref","_callee2","accounts","ticketPrice","newPotValue","_callee2$","_context2","eth","getAccounts","ticketPriceInMOMO","send","from","value","children","onClick"],"sources":["/Users/grantgautier/Desktop/GitHub/ReLaunch_dApp/src/components/LotteryActions.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport web3 from '../utilities/web3';\nimport { getContract } from '../utilities/contract';\n\nfunction LotteryActions() {\n    const [pot, setPot] = useState(0);\n    const contract = getContract();\n\n    useEffect(() => {\n        async function fetchPot() {\n            const potValue = await contract.methods.totalPot().call();\n            setPot(web3.utils.fromWei(potValue, 'ether'));\n        }\n        fetchPot();\n    }, [contract]);\n\n    const buyTicket = async () => {\n        const accounts = await web3.eth.getAccounts();\n        const ticketPrice = await contract.methods.ticketPriceInMOMO().call();\n        await contract.methods.buyTicket().send({ from: accounts[0], value: ticketPrice });\n        const newPotValue = await contract.methods.totalPot().call();\n        setPot(web3.utils.fromWei(newPotValue, 'ether'));\n    };\n\n    return (\n        <div>\n            <h2>Lottery Actions</h2>\n\n            <div>\n                <h3>Current Pot: {pot} ETH</h3>\n                <button onClick={buyTicket}>Buy Ticket</button>\n            </div>\n        </div>\n    );\n}\n\nexport default LotteryActions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}